<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Stretto is a pure Rust implementation for https://github.com/dgraph-io/ristretto."><meta name="keywords" content="rust, rustlang, rust-lang, stretto"><title>stretto - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../stretto/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../stretto/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Crate stretto</a></h2><div class="sidebar-elems"><div class="block"><ul><li class="version">Version 0.4.5</li><li><a id="all-types" href="all.html">All Items</a></li></div></ul><section><div class="block"><ul><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li></ul></div></section><div id="sidebar-vars" data-name="stretto" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../stretto/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">stretto</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/stretto/lib.rs.html#1-545">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><div align="center">
<h1>Stretto</h1>
</div>
<div align="center">
<p>Stretto is a pure Rust implementation for <a href="https://github.com/dgraph-io/ristretto">https://github.com/dgraph-io/ristretto</a>.</p>
<p>A high performance thread-safe memory-bound Rust cache.</p>
<p>English | <a href="https://github.com/al8n/stretto/blob/main/README-zh_CN.md">简体中文</a></p>
<p><a href="https://github.com/al8n/stretto/"><img alt="github" src="https://img.shields.io/badge/GITHUB-Stretto-8da0cb?style=for-the-badge&logo=Github" height="22"></a>
<a href="https://github.com/al8n/stretto/actions/workflows/ci.yml"><img alt="Build" src="https://img.shields.io/github/workflow/status/al8n/stretto/CI/main?logo=Github-Actions&style=for-the-badge" height="22"></a>
<a href="https://app.codecov.io/gh/al8n/stretto/"><img alt="codecov" src="https://img.shields.io/codecov/c/gh/al8n/stretto?style=for-the-badge&token=P175Q03Q1L&logo=codecov" height="22"></a></p>
<p><a href="https://docs.rs/stretto"><img alt="docs.rs" src="https://img.shields.io/badge/docs.rs-stretto-66c2a5?style=for-the-badge&labelColor=555555&logo=data:image/svg+xml;base64,PHN2ZyByb2xlPSJpbWciIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDUxMiA1MTIiPjxwYXRoIGZpbGw9IiNmNWY1ZjUiIGQ9Ik00ODguNiAyNTAuMkwzOTIgMjE0VjEwNS41YzAtMTUtOS4zLTI4LjQtMjMuNC0zMy43bC0xMDAtMzcuNWMtOC4xLTMuMS0xNy4xLTMuMS0yNS4zIDBsLTEwMCAzNy41Yy0xNC4xIDUuMy0yMy40IDE4LjctMjMuNCAzMy43VjIxNGwtOTYuNiAzNi4yQzkuMyAyNTUuNSAwIDI2OC45IDAgMjgzLjlWMzk0YzAgMTMuNiA3LjcgMjYuMSAxOS45IDMyLjJsMTAwIDUwYzEwLjEgNS4xIDIyLjEgNS4xIDMyLjIgMGwxMDMuOS01MiAxMDMuOSA1MmMxMC4xIDUuMSAyMi4xIDUuMSAzMi4yIDBsMTAwLTUwYzEyLjItNi4xIDE5LjktMTguNiAxOS45LTMyLjJWMjgzLjljMC0xNS05LjMtMjguNC0yMy40LTMzLjd6TTM1OCAyMTQuOGwtODUgMzEuOXYtNjguMmw4NS0zN3Y3My4zek0xNTQgMTA0LjFsMTAyLTM4LjIgMTAyIDM4LjJ2LjZsLTEwMiA0MS40LTEwMi00MS40di0uNnptODQgMjkxLjFsLTg1IDQyLjV2LTc5LjFsODUtMzguOHY3NS40em0wLTExMmwtMTAyIDQxLjQtMTAyLTQxLjR2LS42bDEwMi0zOC4yIDEwMiAzOC4ydi42em0yNDAgMTEybC04NSA0Mi41di03OS4xbDg1LTM4Ljh2NzUuNHptMC0xMTJsLTEwMiA0MS40LTEwMi00MS40di0uNmwxMDItMzguMiAxMDIgMzguMnYuNnoiPjwvcGF0aD48L3N2Zz4K" height="20"></a>
<a href="https://crates.io/crates/stretto"><img alt="crates.io" src="https://img.shields.io/crates/v/stretto?style=for-the-badge&logo=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDUxMiA1MTIiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGc+DQoJCTxwYXRoIGQ9Ik0yNTYsMEwzMS41MjgsMTEyLjIzNnYyODcuNTI4TDI1Niw1MTJsMjI0LjQ3Mi0xMTIuMjM2VjExMi4yMzZMMjU2LDB6IE0yMzQuMjc3LDQ1Mi41NjRMNzQuOTc0LDM3Mi45MTNWMTYwLjgxDQoJCQlsMTU5LjMwMyw3OS42NTFWNDUyLjU2NHogTTEwMS44MjYsMTI1LjY2MkwyNTYsNDguNTc2bDE1NC4xNzQsNzcuMDg3TDI1NiwyMDIuNzQ5TDEwMS44MjYsMTI1LjY2MnogTTQzNy4wMjYsMzcyLjkxMw0KCQkJbC0xNTkuMzAzLDc5LjY1MVYyNDAuNDYxbDE1OS4zMDMtNzkuNjUxVjM3Mi45MTN6IiBmaWxsPSIjRkZGIi8+DQoJPC9nPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPC9zdmc+DQo=" height="22"></a>
<a href="https://github.com/rust-lang/rust/blob/master/RELEASES.md"><img alt="rustc" src="https://img.shields.io/badge/MSRV-1.55.0-fc8d62.svg?style=for-the-badge&logo=Rust" height="22"></a></p>
<p><a href="https://opensource.org/licenses/Apache-2.0"><img alt="license-apache" src="https://img.shields.io/badge/License-Apache%202.0-blue.svg?style=for-the-badge&logo=Apache" height="22"></a>
<a href="https://opensource.org/licenses/MIT"><img alt="license-mit" src="https://img.shields.io/badge/License-MIT-yellow.svg?style=for-the-badge&fontColor=white&logoColor=f5c076&logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzZweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMzZweCIgZmlsbD0iI2Y1YzA3NiI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTEwLjA4IDEwLjg2Yy4wNS0uMzMuMTYtLjYyLjMtLjg3cy4zNC0uNDYuNTktLjYyYy4yNC0uMTUuNTQtLjIyLjkxLS4yMy4yMy4wMS40NC4wNS42My4xMy4yLjA5LjM4LjIxLjUyLjM2cy4yNS4zMy4zNC41My4xMy40Mi4xNC42NGgxLjc5Yy0uMDItLjQ3LS4xMS0uOS0uMjgtMS4yOXMtLjQtLjczLS43LTEuMDEtLjY2LS41LTEuMDgtLjY2LS44OC0uMjMtMS4zOS0uMjNjLS42NSAwLTEuMjIuMTEtMS43LjM0cy0uODguNTMtMS4yLjkyLS41Ni44NC0uNzEgMS4zNlM4IDExLjI5IDggMTEuODd2LjI3YzAgLjU4LjA4IDEuMTIuMjMgMS42NHMuMzkuOTcuNzEgMS4zNS43Mi42OSAxLjIuOTFjLjQ4LjIyIDEuMDUuMzQgMS43LjM0LjQ3IDAgLjkxLS4wOCAxLjMyLS4yM3MuNzctLjM2IDEuMDgtLjYzLjU2LS41OC43NC0uOTQuMjktLjc0LjMtMS4xNWgtMS43OWMtLjAxLjIxLS4wNi40LS4xNS41OHMtLjIxLjMzLS4zNi40Ni0uMzIuMjMtLjUyLjNjLS4xOS4wNy0uMzkuMDktLjYuMS0uMzYtLjAxLS42Ni0uMDgtLjg5LS4yMy0uMjUtLjE2LS40NS0uMzctLjU5LS42MnMtLjI1LS41NS0uMy0uODgtLjA4LS42Ny0uMDgtMXYtLjI3YzAtLjM1LjAzLS42OC4wOC0xLjAxek0xMiAyQzYuNDggMiAyIDYuNDggMiAxMnM0LjQ4IDEwIDEwIDEwIDEwLTQuNDggMTAtMTBTMTcuNTIgMiAxMiAyem0wIDE4Yy00LjQxIDAtOC0zLjU5LTgtOHMzLjU5LTggOC04IDggMy41OSA4IDgtMy41OSA4LTggOHoiLz48L3N2Zz4=" height="22"></a></p>
</div>
<h3 id="features"><a href="#features">Features</a></h3>
<ul>
<li><strong>Internal Mutability</strong> - Do not need to use <code>Arc&lt;RwLock&lt;Cache&lt;...&gt;&gt;</code> for concurrent code, you just need <code>Cache&lt;...&gt;</code> or <code>AsyncCache&lt;...&gt;</code></li>
<li><strong>Sync and Async</strong> - Stretto support async by <code>tokio</code> and sync by <code>crossbeam</code>.
<ul>
<li>In sync, <a href="struct.Cache.html"><code>Cache</code></a> starts two extra OS level threads. One is policy thread, the other is writing thread.</li>
<li>In async, <a href="struct.AsyncCache.html"><code>AsyncCache</code></a> starts two extra green threads. One is policy thread, the other is writing thread.</li>
</ul>
</li>
<li><strong>Store policy</strong> Stretto only store the value, which means the cache does not store the key.</li>
<li><strong>High Hit Ratios</strong> - with Dgrpah’s developers unique admission/eviction policy pairing, Stretto’s performance is best in class.</li>
<li><strong>Eviction: SampledLFU</strong> - on par with exact LRU and better performance on Search and Database traces.</li>
<li><strong>Admission: TinyLFU</strong> - extra performance with little memory overhead (12 bits per counter).</li>
<li><strong>Fast Throughput</strong> - use a variety of techniques for managing contention and the result is excellent throughput.</li>
<li><strong>Cost-Based Eviction</strong> - any large new item deemed valuable can evict multiple smaller items (cost could be anything).</li>
<li><strong>Fully Concurrent</strong> - you can use as many threads as you want with little throughput degradation.</li>
<li><strong>Metrics</strong> - optional performance metrics for throughput, hit ratios, and other stats.</li>
<li><strong>Simple API</strong> - just figure out your ideal <a href="struct.CacheBuilder.html"><code>CacheBuilder</code></a> values and you’re off and running.</li>
</ul>
<h3 id="table-of-contents"><a href="#table-of-contents">Table of Contents</a></h3>
<ul>
<li><a href="#Usage">Usage</a></li>
<li><a href="#Example">Example</a>
<ul>
<li><a href="#Sync">Sync</a></li>
<li><a href="#Async">Async</a></li>
</ul>
</li>
<li><a href="#Config">Config</a>
<ul>
<li><a href="#num_counters">num_counters</a></li>
<li><a href="#max_cost">max_cost</a></li>
<li><a href="#key_builder">key_builder</a></li>
<li><a href="#buffer_size">buffer_size</a></li>
<li><a href="#metrics">metrics</a></li>
<li><a href="#ignore_internal_cost">ignore_internal_cost</a></li>
<li><a href="#cleanup_duration">cleanup_duration</a></li>
<li><a href="#update_validator">update_validator</a></li>
<li><a href="#callback">callback</a></li>
<li><a href="#coster">coster</a></li>
<li><a href="#hasher">hasher</a></li>
</ul>
</li>
</ul>
<h3 id="usage"><a href="#usage">Usage</a></h3><h4 id="example"><a href="#example">Example</a></h4>
<p>Please see <a href="https://github.com/al8n/stretto/tree/main/examples">examples</a> on github.</p>
<h4 id="config"><a href="#config">Config</a></h4>
<p>The <a href="struct.CacheBuilder.html"><code>CacheBuilder</code></a> or <a href="struct.AsyncCacheBuilder.html"><code>AsyncCacheBuilder</code></a> struct is used when creating <a href="struct.Cache.html"><code>Cache</code></a>/<a href="struct.AsyncCache.html"><code>AsyncCache</code></a> instances if you want to customize the <a href="struct.Cache.html"><code>Cache</code></a>/<a href="struct.AsyncCache.html"><code>AsyncCache</code></a> settings.</p>
<h5 id="num_counters"><a href="#num_counters">num_counters</a></h5>
<p><code>num_counters</code> is the number of 4-bit access counters to keep for admission and eviction.
Dgraph’s developers have seen good performance in setting this to 10x the number of
items you expect to keep in the cache when full.</p>
<p>For example, if you expect each item to have a cost of 1 and <code>max_cost</code> is 100, set <code>num_counters</code> to 1,000.
Or, if you use variable cost values but expect the cache to hold around 10,000 items when full,
set num_counters to 100,000. The important thing is the <em>number of unique items</em> in the full cache,
not necessarily the <code>max_cost</code> value.</p>
<h5 id="max_cost"><a href="#max_cost">max_cost</a></h5>
<p><code>max_cost</code> is how eviction decisions are made. For example,
if max_cost is 100 and a new item with a cost of 1 increases total cache cost to 101,
1 item will be evicted.</p>
<p><code>max_cost</code> can also be used to denote the max size in bytes. For example,
if max_cost is 1,000,000 (1MB) and the cache is full with 1,000 1KB items,
a new item (that’s accepted) would cause 5 1KB items to be evicted.</p>
<p><code>max_cost</code> could be anything as long as it matches how you’re using the cost values when calling <code>insert</code>.</p>
<h5 id="key_builder"><a href="#key_builder">key_builder</a></h5>
<p><a href="trait.KeyBuilder.html"><code>KeyBuilder</code></a> is the hashing algorithm used for every key. In Stretto, the Cache will never store the real key.
The key will be processed by <a href="trait.KeyBuilder.html"><code>KeyBuilder</code></a>. Stretto has two default built-in key builder,
one is <a href="struct.TransparentKeyBuilder.html"><code>TransparentKeyBuilder</code></a>, the other is <a href="struct.DefaultKeyBuilder.html"><code>DefaultKeyBuilder</code></a>. If your key implements <a href="trait.TransparentKey.html"><code>TransparentKey</code></a> trait,
you can use <a href="struct.TransparentKeyBuilder.html"><code>TransparentKeyBuilder</code></a> which is faster than <a href="struct.DefaultKeyBuilder.html"><code>DefaultKeyBuilder</code></a>. Otherwise, you should use <a href="struct.DefaultKeyBuilder.html"><code>DefaultKeyBuilder</code></a>
You can also write your own key builder for the Cache, by implementing <a href="trait.KeyBuilder.html"><code>KeyBuilder</code></a> trait.</p>
<p>Note that if you want 128bit hashes you should use the full <code>(u64, u64)</code>,
otherwise just fill the <code>u64</code> at the <code>0</code> position, and it will behave like
any 64bit hash.</p>
<h5 id="buffer_size"><a href="#buffer_size">buffer_size</a></h5>
<p><code>buffer_size</code> is the size of the insert buffers. The Dgraph’s developers find that 32 * 1024 gives a good performance.</p>
<p>If for some reason you see insert performance decreasing with lots of contention (you shouldn’t),
try increasing this value in increments of 32 * 1024.
This is a fine-tuning mechanism and you probably won’t have to touch this.</p>
<h5 id="metrics"><a href="#metrics">metrics</a></h5>
<p>Metrics is true when you want real-time logging of a variety of stats.
The reason this is a CacheBuilder flag is because there’s a 10% throughput performance overhead.</p>
<h5 id="ignore_internal_cost"><a href="#ignore_internal_cost">ignore_internal_cost</a></h5>
<p>Set to true indicates to the cache that the cost of
internally storing the value should be ignored. This is useful when the
cost passed to set is not using bytes as units. Keep in mind that setting
this to true will increase the memory usage.</p>
<h5 id="cleanup_duration"><a href="#cleanup_duration">cleanup_duration</a></h5>
<p>The Cache will cleanup the expired values every 500ms by default.</p>
<h5 id="update_validator"><a href="#update_validator">update_validator</a></h5>
<p>By default, the Cache will always update the value if the value already exists in the cache.
<a href="trait.UpdateValidator.html"><code>UpdateValidator</code></a> is a trait to support customized update policy (check if the value should be updated
if the value already exists in the cache).</p>
<h5 id="callback"><a href="#callback">callback</a></h5>
<p><a href="trait.CacheCallback.html"><code>CacheCallback</code></a> is for customize some extra operations on values when related event happens.</p>
<h5 id="coster"><a href="#coster">coster</a></h5>
<p><a href="trait.Coster.html"><code>Coster</code></a> is a trait you can pass to the <a href="struct.CacheBuilder.html"><code>CacheBuilder</code></a> in order to evaluate
item cost at runtime, and only for the <a href="struct.Cache.html#method.insert"><code>insert</code></a> calls that aren’t dropped (this is
useful if calculating item cost is particularly expensive, and you don’t want to
waste time on items that will be dropped anyways).</p>
<p>To signal to Stretto that you’d like to use this <a href="trait.Coster.html"><code>Coster</code></a> trait:</p>
<ol>
<li>Set the <a href="trait.Coster.html"><code>Coster</code></a> field to your own <a href="trait.Coster.html"><code>Coster</code></a> implementation.</li>
<li>When calling <a href="struct.Cache.html#method.insert"><code>insert</code></a> for new items or item updates, use a cost of 0.</li>
</ol>
<h5 id="hasher"><a href="#hasher">hasher</a></h5>
<p>The hasher for the Cache, default is SipHasher.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.AsyncCache.html" title="stretto::AsyncCache struct">AsyncCache</a></div><div class="item-right docblock-short"><p>AsyncCache is a thread-safe async implementation of a hashmap with a TinyLFU admission
policy and a Sampled LFU eviction policy. You can use the same AsyncCache instance
from as many threads as you want.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.AsyncCacheBuilder.html" title="stretto::AsyncCacheBuilder struct">AsyncCacheBuilder</a></div><div class="item-right docblock-short"><p>The <code>AsyncCacheBuilder</code> struct is used when creating <a href="struct.AsyncCache.html"><code>AsyncCache</code></a> instances if you want to customize the <a href="struct.AsyncCache.html"><code>AsyncCache</code></a> settings.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Cache.html" title="stretto::Cache struct">Cache</a></div><div class="item-right docblock-short"><p>Cache is a thread-safe implementation of a hashmap with a TinyLFU admission
policy and a Sampled LFU eviction policy. You can use the same Cache instance
from as many threads as you want.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CacheBuilder.html" title="stretto::CacheBuilder struct">CacheBuilder</a></div><div class="item-right docblock-short"><p>The <code>CacheBuilder</code> struct is used when creating <a href="struct.Cache.html"><code>Cache</code></a> instances if you want to customize the <a href="struct.Cache.html"><code>Cache</code></a> settings.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.DefaultKeyBuilder.html" title="stretto::DefaultKeyBuilder struct">DefaultKeyBuilder</a></div><div class="item-right docblock-short"><p>DefaultKeyBuilder is a built-in <code>KeyBuilder</code> for the Cache.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Histogram.html" title="stretto::Histogram struct">Histogram</a></div><div class="item-right docblock-short"><p><code>Histogram</code> stores the information needed to represent the sizes of the keys and values
as a histogram.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Item.html" title="stretto::Item struct">Item</a></div><div class="item-right docblock-short"><p>Item is the parameter when Cache reject, evict value,</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TransparentKeyBuilder.html" title="stretto::TransparentKeyBuilder struct">TransparentKeyBuilder</a></div><div class="item-right docblock-short"><p>TransparentKeyBuilder converts key to <code>u64</code>.
If the key does not implement the trait <a href="trait.TransparentKey.html"><code>TransparentKey</code></a>, please use <a href="struct.DefaultKeyBuilder.html"><code>DefaultKeyBuilder</code></a>
or write a custom key builder.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ValueRef.html" title="stretto::ValueRef struct">ValueRef</a></div><div class="item-right docblock-short"><p>ValueRef is returned when invoking <code>get</code> method of the Cache.
It contains a <code>RwLockReadGuard</code> and a value reference.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ValueRefMut.html" title="stretto::ValueRefMut struct">ValueRefMut</a></div><div class="item-right docblock-short"><p>ValueRefMut is returned when invoking <code>get_mut</code> method of the Cache.
It contains a <code>RwLockWriteGuard</code> and a mutable value reference.</p>
</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.CacheError.html" title="stretto::CacheError enum">CacheError</a></div><div class="item-right docblock-short"><p>CacheError contains the error of this crate</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.MetricType.html" title="stretto::MetricType enum">MetricType</a></div><div class="item-right docblock-short"><p>The data field in a Metrics</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.Metrics.html" title="stretto::Metrics enum">Metrics</a></div><div class="item-right docblock-short"><p>Metrics is a snapshot of performance statistics for the lifetime of a cache instance.</p>
</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.CacheCallback.html" title="stretto::CacheCallback trait">CacheCallback</a></div><div class="item-right docblock-short"><p>CacheCallback is for customize some extra operations on values when related event happens.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Coster.html" title="stretto::Coster trait">Coster</a></div><div class="item-right docblock-short"><p>Cost is a trait you can pass to the CacheBuilder in order to evaluate
item cost at runtime, and only for the <code>insert</code> calls that aren’t dropped (this is
useful if calculating item cost is particularly expensive, and you don’t want to
waste time on items that will be dropped anyways).</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.KeyBuilder.html" title="stretto::KeyBuilder trait">KeyBuilder</a></div><div class="item-right docblock-short"><p><a href="trait.KeyBuilder.html"><code>KeyBuilder</code></a> is the hashing algorithm used for every key. In Stretto, the Cache will never store the real key.
The key will be processed by <a href="trait.KeyBuilder.html"><code>KeyBuilder</code></a>. Stretto has two default built-in key builder,
one is <a href="struct.TransparentKeyBuilder.html"><code>TransparentKeyBuilder</code></a>, the other is <a href="struct.DefaultKeyBuilder.html"><code>DefaultKeyBuilder</code></a>. If your key implements <a href="trait.TransparentKey.html"><code>TransparentKey</code></a> trait,
you can use <a href="struct.TransparentKeyBuilder.html"><code>TransparentKeyBuilder</code></a> which is faster than <a href="struct.DefaultKeyBuilder.html"><code>DefaultKeyBuilder</code></a>. Otherwise, you should use <a href="struct.DefaultKeyBuilder.html"><code>DefaultKeyBuilder</code></a>
You can also write your own key builder for the Cache, by implementing <a href="trait.KeyBuilder.html"><code>KeyBuilder</code></a> trait.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.TransparentKey.html" title="stretto::TransparentKey trait">TransparentKey</a></div><div class="item-right docblock-short"><p>Implement this trait for the key, if you want to use <a href="struct.TransparentKeyBuilder.html"><code>TransparentKeyBuilder</code></a> as the <a href="trait.KeyBuilder.html"><code>KeyBuilder</code></a>
for the <a href="struct.Cache.html"><code>Cache</code></a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.UpdateValidator.html" title="stretto::UpdateValidator trait">UpdateValidator</a></div><div class="item-right docblock-short"><p>By default, the Cache will always update the value if the value already exists in the cache,
this trait is for you to check if the value should be updated.</p>
</div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="stretto" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.61.0 (fe5b13d68 2022-05-18)" ></div>
</body></html>